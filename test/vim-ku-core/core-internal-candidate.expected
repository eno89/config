==== ku_omnifunc findstart 0
---- It should return [] with no source 
...
---- It should return some candidate with a source 
.....
---- It should return some candidate with a source and a:base contains a prompt 
....
---- It requires to reset side effect 
...

==== ku_omnifunc findstart 1
---- It requires the following initialization 
..
---- It should succeed with the default state (there is only the prompt) 
..
---- It should succeed with the prompt and some characters 
..
---- It should succeed with no character 
..
---- It should succeed with some characters but no prompt 
..
---- It requires to reset side effect 
...

==== s_cache_key 
---- It should return a mangled version of a given pattern 
....

==== s_filter_lcandidates 
---- It should return candidates as-is with no filter 
.
---- It should return candidates filtered by M 
.
---- It should return candidates filtered by ODD 
.
---- It should return candidates filtered by M and ODD 
.
---- It should return the same candidates regardless of order of filters 
.

==== s_kinds_from_candidate 
---- It requires the following initialization 
....
---- It should return kinds defined by a source 
.
---- It should return kinds defined by a candidate 
.
---- It requires to reset side effect 
.

==== s_lcandidates_from_pattern ...
---- It should return [] with no source 
.
---- It should return some candidates with a source 
.
---- It should return some candidates with multiple sources 
.
---- It should return some candidates with multiple sources - duplicate sources 
.
---- It should return sorted candidates for a source with sorters 
.
---- It should return partially sorted candidates for sources with/without sorters 
.

==== s_lcandidates_from_pattern args source
---- It requires the following initialization 
..
---- It should pass a valid args.source 
.
---- It requires to reset side effect 


==== s_make_lcandidates_for_a_source 
---- It requires the following initialization 
.
---- It should return matched/filtered/sorted/normalized candidates 
.
---- It requires to reset side effect 
.

==== s_matched_lcandidates 
---- It requires the following initialization 

---- It should return nothing with no matcher 
.
---- It should return some candidates with the simple matcher 
.
---- It should return some candidates with a custom matcher 
.
---- It should return some candidates matched with "simple" or "odd" 
.
---- It requires to reset side effect 


==== s_normalize_candidate 
---- It should normalize a given candidate with a given source 
..

==== s_raw_lcandidates 
---- It requires the following initialization 
.
---- It should return raw candidates gatherd by a given source 
.
---- It requires to reset side effect 
.

==== s_raw_lcandidates cache constant
---- It requires the following initialization 
.
---- It should call source.gather_candidates only once 
..................
---- It requires to reset side effect 


==== s_raw_lcandidates cache gel
---- It requires the following initialization 
.
---- It should call source.gather_candidates by "special characters" in pattern 
........................
---- It requires to reset side effect 


==== s_raw_lcandidates cache invalid
---- It requires the following initialization 
.
---- It should raise error but behave as if "volatile" 
......
---- It requires to reset side effect 


==== s_raw_lcandidates cache pattern
---- It requires the following initialization 
.
---- It should call source.gather_candidates for different pattern 
............
---- It requires to reset side effect 


==== s_raw_lcandidates cache volatile
---- It requires the following initialization 
.
---- It should call source.gather_candidates for each time 
......
---- It requires to reset side effect 


==== s_sort_lcandidates 
---- It should return unsorted candidates with no sorter 
.
---- It should return sorted candidates with a sorter 
.
---- It should return sorted candidates with a custom sorter 
.
---- It should return candidates sorted by "simple" then sorted by "reverse" 
.



**** Result ****


143 examples, 0 failures
