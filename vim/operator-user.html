<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Vim: operator-user - Define your own operator easily</title>
<meta name="Generator" content="Vim/7.2" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<style type="text/css">
<!--
.Statement { color: #008080; font-weight: bold; }
.Identifier { color: #804000; text-decoration: underline; }
.PreProc { color: #c000c0; text-decoration: underline; }
.Comment { color: #c00000; font-weight: bold; }
.Special { color: #c000c0; font-weight: bold; }
.Type { color: #008000; text-decoration: underline; }
pre { font-family: monospace; color: #000000; background-color: #ffffff; }
body { font-family: monospace; color: #000000; background-color: #ffffff; }
.Ignore { color: #ffffff; }
.Constant { color: #0000c0; text-decoration: underline; }
-->
</style>
</head>
<body>
<pre>
<span class="Ignore">*</span><span class="Constant" id="operator-user.txt">operator-user.txt</span><span class="Ignore">*</span>     Define your own operator easily

Version 0.0.1
Script ID: 2692
Copyright (C) 2009 kana &lt;<span class="Constant"><a href="http://whileimautomaton.net/">http://whileimautomaton.net/</a></span>&gt;
License: MIT license  {{{
    Permission is hereby granted, free of charge, to any person obtaining
    a copy of this software and associated documentation files (the
    &quot;Software&quot;), to deal in the Software without restriction, including
    without limitation the rights to use, copy, modify, merge, publish,
    distribute, sublicense, and/or sell copies of the Software, and to
    permit persons to whom the Software is furnished to do so, subject to
    the following conditions:

    The above copyright notice and this permission notice shall be included
    in all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS
    OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
    MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
    IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
    CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
    TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
    SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
}}}

<span class="Statement">CONTENTS                                        </span><span class="Ignore">*</span><span class="Constant" id="operator-user-contents">operator-user-contents</span><span class="Ignore">*</span>

Introduction            <span class="Ignore">|</span><a href="operator-user.html#operator-user-introduction"><span class="Identifier">operator-user-introduction</span></a><span class="Ignore">|</span>
Interface               <span class="Ignore">|</span><a href="operator-user.html#operator-user-interface"><span class="Identifier">operator-user-interface</span></a><span class="Ignore">|</span>
  Commands                <span class="Ignore">|</span><a href="operator-user.html#operator-user-commands"><span class="Identifier">operator-user-commands</span></a><span class="Ignore">|</span>
  Functions               <span class="Ignore">|</span><a href="operator-user.html#operator-user-functions"><span class="Identifier">operator-user-functions</span></a><span class="Ignore">|</span>
Examples                <span class="Ignore">|</span><a href="operator-user.html#operator-user-examples"><span class="Identifier">operator-user-examples</span></a><span class="Ignore">|</span>
Bugs                    <span class="Ignore">|</span><a href="operator-user.html#operator-user-bugs"><span class="Identifier">operator-user-bugs</span></a><span class="Ignore">|</span>
Changelog               <span class="Ignore">|</span><a href="operator-user.html#operator-user-changelog"><span class="Identifier">operator-user-changelog</span></a><span class="Ignore">|</span>




<span class="PreProc">==============================================================================</span>
<span class="Statement">INTRODUCTION                                    </span><span class="Ignore">*</span><span class="Constant" id="operator-user-introduction">operator-user-introduction</span><span class="Ignore">*</span>

<span class="Ignore">*</span><span class="Constant" id="operator-user">operator-user</span><span class="Ignore">*</span> is a Vim plugin to provide an easy way to define your own
<span class="Ignore">|</span><span class="Identifier">operator</span><span class="Ignore">|</span>.  Though there are several pitfalls to define operators, you don't
have to take care of them with <span class="Ignore">|</span><a href="operator-user.html#:DefineOperator"><span class="Identifier">:DefineOperator</span></a><span class="Ignore">|</span> and/or
<span class="Ignore">|</span><a href="operator-user.html#operator#user#define()"><span class="Identifier">operator#user#define()</span></a><span class="Ignore">|</span> which are provided by this plugin.

For example, the following setting defines operator &quot;_&quot; to adjust the height
of the current window to the same as the target range:
<span class="Ignore">&gt;</span>
<span class="Comment">        DefineOperator _  Op_adjust_window_height</span>
<span class="Comment">        function! Op_adjust_window_height(motion_wiseness)</span>
<span class="Comment">          execute (line(&quot;']&quot;) - line(&quot;'[&quot;) + 1) 'wincmd' '_'</span>
<span class="Comment">          normal! `[zt</span>
<span class="Comment">        endfunction</span>
<span class="Ignore">&lt;</span>
You can use this operator as follows:

        10__    Adjust to 10 lines and show the current line at the top.
        _ip     Adjust to the same height of the paragraph under the cursor.

This operator is useful to adjust the visible content in the current window.

See also <span class="Ignore">|</span><span class="Identifier">operator-user-exmaples</span><span class="Ignore">|</span> for more examples and explanations.


Requirements:
- Vim 7.2 or later

Latest version:
<span class="Constant"><a href="http://github.com/kana/config/commits/vim-operator-user">http://github.com/kana/config/commits/vim-operator-user</a></span>

Document in HTML format:
<span class="Constant"><a href="http://kana.github.com/config/vim/operator-user.html">http://kana.github.com/config/vim/operator-user.html</a></span>




<span class="PreProc">==============================================================================</span>
<span class="Statement">INTERFACE                                       </span><span class="Ignore">*</span><span class="Constant" id="operator-user-interface">operator-user-interface</span><span class="Ignore">*</span>

<span class="PreProc">------------------------------------------------------------------------------</span>
<span class="Statement">COMMANDS                                        </span><span class="Ignore">*</span><span class="Constant" id="operator-user-commands">operator-user-commands</span><span class="Ignore">*</span>

:DefineOperator <span class="Special">{lhs}</span>  <span class="Special">{function}</span> [<span class="Special">{extra}</span>]     <span class="Ignore">*</span><span class="Constant" id=":DefineOperator">:DefineOperator</span><span class="Ignore">*</span>
                        Define a new operator.
                        - <span class="Special">{lhs}</span> is a key sequence which is mapped to something
                          to execute the operator.  This key mapping is
                          defined in Normal mode and Visual mode.  <span class="Special">{lhs}</span> is
                          also mapped to <span class="Ignore">|</span><span class="Identifier">g@</span><span class="Ignore">|</span> in Operator-pending mode to
                          operate linewise like <span class="Ignore">|</span><span class="Identifier">cc</span><span class="Ignore">|</span>, <span class="Ignore">|</span><span class="Identifier">dd</span><span class="Ignore">|</span>, etc.
                        - <span class="Special">{function}</span> is the name of a function which is called
                          whenever the operator is executed.
                        - <span class="Special">{extra}</span> is an arbitrary key sequence which is
                          executed after setting <span class="Type">'operatorfunc'</span> and before
                          starting Operator-pending mode.


<span class="PreProc">------------------------------------------------------------------------------</span>
<span class="Statement">FUNCTIONS                                       </span><span class="Ignore">*</span><span class="Constant" id="operator-user-functions">operator-user-functions</span><span class="Ignore">*</span>

                                                <span class="Ignore">*</span><span class="Constant" id="operator#user#define()">operator#user#define()</span><span class="Ignore">*</span>
operator#user#define(<span class="Special">{lhs}</span>, <span class="Special">{function}</span>, [<span class="Special">{extra}</span>])
                        Function version of <span class="Ignore">|</span><a href="operator-user.html#:DefineOperator"><span class="Identifier">:DefineOperator</span></a><span class="Ignore">|</span>.

operator#user#load()                            <span class="Ignore">*</span><span class="Constant" id="operator#user#load()">operator#user#load()</span><span class="Ignore">*</span>
                        Load this plugin if it is not loaded yet.  Otherwise,
                        does nothing.  Call this function to ensure that
                        <span class="Ignore">|</span><a href="operator-user.html#operator-user-commands"><span class="Identifier">operator-user-commands</span></a><span class="Ignore">|</span> are defined before you use one
                        of them, especially, in your <span class="Ignore">|</span><span class="Identifier">vimrc</span><span class="Ignore">|</span>.




<span class="PreProc">==============================================================================</span>
<span class="Statement">EXAMPLES                                        </span><span class="Ignore">*</span><span class="Constant" id="operator-user-examples">operator-user-examples</span><span class="Ignore">*</span>

(A) The following setting defines operator-version of <span class="Ignore">|</span><span class="Identifier">:right</span><span class="Ignore">|</span>:
<span class="Ignore">&gt;</span>
<span class="Comment">        DefineOperator L  Op_command_right</span>
<span class="Comment">        function! Op_command_right(motion_wiseness)</span>
<span class="Comment">          '[,']right</span>
<span class="Comment">        endfunction</span>
<span class="Ignore">&lt;</span>

(B) The following setting defines a generic version of (A).  This is also an
example to use <span class="Special">{extra}</span> of <span class="Ignore">|</span><a href="operator-user.html#:DefineOperator"><span class="Identifier">:DefineOperator</span></a><span class="Ignore">|</span>:
<span class="Ignore">&gt;</span>
<span class="Comment">        DefineOperator H  Op_command</span>
<span class="Comment">        \              call Set_op_command('left')</span>
<span class="Comment">        DefineOperator L  Op_command</span>
<span class="Comment">        \              call Set_op_command('right')</span>
<span class="Comment">        DefineOperator M  Op_command</span>
<span class="Comment">        \              call Set_op_command('center')</span>

<span class="Comment">        let s:op_command_command = ''</span>

<span class="Comment">        function! Set_op_command(command)</span>
<span class="Comment">          let s:op_command_command = a:command</span>
<span class="Comment">        endfunction</span>

<span class="Comment">        function! Op_command(motion_wiseness)</span>
<span class="Comment">          execute &quot;'[,']&quot; s:op_command_command</span>
<span class="Comment">        endfunction</span>
<span class="Ignore">&lt;</span>




<span class="PreProc">==============================================================================</span>
<span class="Statement">BUGS                                            </span><span class="Ignore">*</span><span class="Constant" id="operator-user-bugs">operator-user-bugs</span><span class="Ignore">*</span>

- <span class="Ignore">|</span><a href="operator-user.html#:DefineOperator"><span class="Identifier">:DefineOperator</span></a><span class="Ignore">|</span> defines a key mapping &quot;<span class="Special">{lhs}</span> to <span class="Ignore">|</span><span class="Identifier">g@</span><span class="Ignore">|</span>&quot; in
  Operator-pending mode to select text linewise like <span class="Ignore">|</span><span class="Identifier">cc</span><span class="Ignore">|</span>, <span class="Ignore">|</span><span class="Identifier">dd</span><span class="Ignore">|</span>, etc.
  But this behavior may be harmful in some cases:

  (a) If you define two operators &quot;A&quot; and &quot;B&quot;, you can operate the cursor line
  with &quot;AA&quot; and &quot;BB&quot;.  But you can ALSO operate the cursor line with &quot;AB&quot; and
  &quot;BA&quot;.  These &quot;<span class="Special">{operator-A}{operator-B}</span>&quot; key combinations are not expected to
  work as if &quot;<span class="Special">{operator-A}{operator-A}</span>&quot;, because there is no such default key
  binding.

  (b) If you already define <span class="Special">{lhs}</span> to something in Operator-pending mode,
  :DefineOperator always overrides the key mapping.

  To avoid these problems, define &quot;named&quot; key sequences first, then map
  something that you want to type to them.  For example:
<span class="Ignore">&gt;</span>
<span class="Comment">        DefineOperator &lt;Plug&gt;(operator-A)  OperatorFunctionA</span>
<span class="Comment">        nmap A  &lt;Plug&gt;(operator-A)</span>
<span class="Comment">        vmap A  &lt;Plug&gt;(operator-A)</span>
<span class="Ignore">&lt;</span>
  See also the following article for the details.  The article is also useful
  if you want to write your own plulgin:
  ``Vim: Plugins should provide &quot;named&quot; key sequences to customize hotkeys,
  not variables'' &lt;<span class="Constant"><a href="http://whileimautomaton.net/2008/09/27/02/27/35/diary">http://whileimautomaton.net/2008/09/27/02/27/35/diary</a></span>&gt;




<span class="PreProc">==============================================================================</span>
<span class="Statement">CHANGELOG                                       </span><span class="Ignore">*</span><span class="Constant" id="operator-user-changelog">operator-user-changelog</span><span class="Ignore">*</span>

0.0.1   2009-07-18T04:41:22+09:00
        - Rename as &quot;operator-user&quot;.  The old name &quot;myoperator&quot; is not good
          for further works.

0.0.0   2009-06-26T02:51:29+09:00
        - Initial version.




<span class="PreProc">==============================================================================</span>
vim:tw=78:ts=8:ft=help:norl:fen:fdl=0:fdm=marker:
</pre>
</body>
</html>
